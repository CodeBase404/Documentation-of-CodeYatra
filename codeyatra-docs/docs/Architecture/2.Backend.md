# Backend Architecture

This document explains the structure, modules, and responsibilities of the backend system powering the LeetCode Clone platform.

## ğŸ§  Responsibilities

The backend is responsible for:

* User authentication and authorization
* Managing problems, submissions, contests, and users
* Code execution via Judge0 API
* Real-time event handling (e.g., live leaderboard)
* Data persistence with MongoDB
* Media management through Cloudinary

## ğŸš€ Tech Stack

| Feature        | Technology         |
| -------------- | ------------------ |
| Framework      | Node.js + Express  |
| Database       | MongoDB + Mongoose |
| Auth           | JWT                |
| Code Execution | Judge0 API         |
| Realtime Comm. | Socket.IO          |
| File Uploads   | Cloudinary         |

## ğŸ“‚ Folder Structure

```bash
backend/
â”œâ”€â”€ controllers/       # Route logic
â”œâ”€â”€ models/            # Mongoose schemas
â”œâ”€â”€ routes/            # API endpoints
â”œâ”€â”€ middlewares/       # Custom auth & error handlers
â”œâ”€â”€ services/          # External API logic (e.g., Judge0, Cloudinary)
â”œâ”€â”€ sockets/           # Real-time event handlers
â”œâ”€â”€ utils/             # Helper functions
â””â”€â”€ index.js           # Entry point
```

## ğŸ” Authentication

* Uses JWT for stateless auth
* Access tokens stored on frontend (usually in localStorage)
* `authMiddleware` protects private routes

## ğŸ“Œ Major Modules

### 1. **Auth**

* Register, login, logout
* Password reset with OTP (email-based)
* Middleware to validate user tokens

### 2. **Problems**

* CRUD operations for problems (admin only)
* Supports problem description, constraints, examples, and test cases
* Code templates per language

### 3. **Submissions**

* Accepts code submission
* Sends it to Judge0 for execution
* Compares result with hidden test cases
* Stores verdict, runtime, memory in DB

### 4. **Contests**

* Contest creation (admin)
* Fetch contest problems by ID
* Handles locking/unlocking during contest
* Submission timestamps and scoring

### 5. **Leaderboard**

* Calculates real-time contest scores
* Emits updates via Socket.IO
* Tracks who solved what and when

### 6. **Daily Challenges**

* Picks 1 random problem daily
* Tracks which user solved which challenge and when

## ğŸ§ª Testing & Error Handling

* Try/catch blocks with structured error messages
* Global error handler middleware
* Input validation using `zod` or custom schemas

## ğŸ“¡ External API Integration

### ğŸ§® Judge0

* Handles safe, sandboxed code execution
* Sends language, code, input â†’ gets output + status

### â˜ï¸ Cloudinary

* Used for uploading & serving editorial/tutorial videos
* Integrates with Cloudinary SDK to upload from backend

---

ğŸ“˜ Next: [`frontend.md`](./frontend.md)
